# Netlify Configuration for Frontend
# Free tier: 100GB bandwidth, 300 build minutes/month

[build]
  base = "frontend"
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "18"
  VITE_API_URL = "https://test-portal-backend-22zx.onrender.com/api"
  VITE_GOOGLE_CLIENT_ID = "563618874909-386bpe7ig2keme4o0gvc6arsp5mh2anu.apps.googleusercontent.com"

# Redirect API calls to backend
[[redirects]]
  from = "/api/*"
  to = "https://test-portal-backend-22zx.onrender.com/api/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/assets/images/*"
  to = "https://test-portal-backend-22zx.onrender.com/assets/images/:splat"
  status = 200

[[redirects]]
  from = "/assets/courses/*"
  to = "https://test-portal-backend-22zx.onrender.com/assets/courses/:splat"
  status = 200

[[redirects]]
  from = "/assets/references/*"
  to = "https://test-portal-backend-22zx.onrender.com/assets/references/:splat"
  status = 200

[[redirects]]
  from = "/screenshots/*"
  to = "https://test-portal-backend-22zx.onrender.com/screenshots/:splat"
  status = 200

# SPA fallback
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "no-referrer"
